{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/submit 3/compliance-client/src/pages/History.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nfunction genHistoryTable(records) {\n  var html = \"<table border=1><tbody>\";\n\n  for (var i = records.length - 1; i >= 0; --i) {\n    var record = records[i];\n    html += \"<tr><td colSpan=2><b>\";\n    html += record.split('|')[0];\n    html += \"</b></td></tr>\";\n    html += \"<tr><td colSpan=2><pre>\";\n    html += record.split('|')[1];\n    html += \"</pre></td></tr>\";\n  }\n\n  html += \"</tbody></table>\";\n  document.getElementById(\"container\").innerHTML = html;\n}\n\nfunction History(props) {\n  const [user, setUser] = useState({});\n  const [conversationHistory, setConversationHistory] = useState([]);\n  useEffect(() => {\n    setUser(props.user);\n  }, [props.user.isLoggedIn]);\n  useEffect(() => {\n    const fetchHistory = async () => {\n      const history = await axios.get(\"/api/userData/history\");\n      setConversationHistory(history.data);\n      var records = [];\n      history.data.map(s => {\n        if (s.length > 2 && '*' === s[0] && '*' === s[1]) {\n          s = s.substring(2);\n          s = s + \"|\";\n          records.push(s);\n        } else if (records.length > 0) {\n          s = s + \"\\n\";\n          records[records.length - 1] += s;\n        }\n      });\n      genHistoryTable(records);\n    };\n\n    fetchHistory();\n  }, [conversationHistory.length]);\n  return React.createElement(\"div\", {\n    id: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  });\n}\n\nexport default History;","map":{"version":3,"sources":["/Users/apple/Desktop/submit 3/compliance-client/src/pages/History.js"],"names":["React","useState","useEffect","axios","genHistoryTable","records","html","i","length","record","split","document","getElementById","innerHTML","History","props","user","setUser","conversationHistory","setConversationHistory","isLoggedIn","fetchHistory","history","get","data","map","s","substring","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,eAAT,CAAyBC,OAAzB,EAAkC;AAC9B,MAAIC,IAAI,GAAG,yBAAX;;AAEA,OAAI,IAAIC,CAAC,GAAGF,OAAO,CAACG,MAAR,GAAiB,CAA7B,EAAgCD,CAAC,IAAI,CAArC,EAAwC,EAAEA,CAA1C,EAA6C;AACzC,QAAIE,MAAM,GAAGJ,OAAO,CAACE,CAAD,CAApB;AAEAD,IAAAA,IAAI,IAAI,uBAAR;AACAA,IAAAA,IAAI,IAAIG,MAAM,CAACC,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAR;AACAJ,IAAAA,IAAI,IAAI,gBAAR;AAEAA,IAAAA,IAAI,IAAI,yBAAR;AACAA,IAAAA,IAAI,IAAIG,MAAM,CAACC,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAR;AACAJ,IAAAA,IAAI,IAAI,kBAAR;AACH;;AAEDA,EAAAA,IAAI,IAAI,kBAAR;AAEAK,EAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,SAArC,GAAiDP,IAAjD;AACH;;AAED,SAASQ,OAAT,CAAiBC,KAAjB,EAAwB;AACpB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACiB,mBAAD,EAAsBC,sBAAtB,IAAgDlB,QAAQ,CAAC,EAAD,CAA9D;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZe,IAAAA,OAAO,CAACF,KAAK,CAACC,IAAP,CAAP;AACH,GAFQ,EAEN,CAACD,KAAK,CAACC,IAAN,CAAWI,UAAZ,CAFM,CAAT;AAIAlB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMmB,YAAY,GAAG,YAAY;AAC7B,YAAMC,OAAO,GAAG,MAAMnB,KAAK,CAACoB,GAAN,CAAU,uBAAV,CAAtB;AACAJ,MAAAA,sBAAsB,CAACG,OAAO,CAACE,IAAT,CAAtB;AAEA,UAAInB,OAAO,GAAG,EAAd;AAEAiB,MAAAA,OAAO,CAACE,IAAR,CAAaC,GAAb,CAAiBC,CAAC,IAClB;AACI,YAAGA,CAAC,CAAClB,MAAF,GAAW,CAAX,IAAgB,QAAQkB,CAAC,CAAC,CAAD,CAAzB,IAAgC,QAAQA,CAAC,CAAC,CAAD,CAA5C,EACA;AACIA,UAAAA,CAAC,GAAGA,CAAC,CAACC,SAAF,CAAY,CAAZ,CAAJ;AACAD,UAAAA,CAAC,GAAGA,CAAC,GAAG,GAAR;AAEArB,UAAAA,OAAO,CAACuB,IAAR,CAAaF,CAAb;AACH,SAND,MAOK,IAAGrB,OAAO,CAACG,MAAR,GAAiB,CAApB,EACL;AACIkB,UAAAA,CAAC,GAAGA,CAAC,GAAG,IAAR;AACArB,UAAAA,OAAO,CAACA,OAAO,CAACG,MAAR,GAAiB,CAAlB,CAAP,IAA+BkB,CAA/B;AACH;AACJ,OAdD;AAgBAtB,MAAAA,eAAe,CAACC,OAAD,CAAf;AACH,KAvBD;;AAwBAgB,IAAAA,YAAY;AACf,GA1BQ,EA0BN,CAACH,mBAAmB,CAACV,MAArB,CA1BM,CAAT;AA4BA,SACI;AAAK,IAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAIH;;AAED,eAAeM,OAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nfunction genHistoryTable(records) {\n    var html = \"<table border=1><tbody>\";\n\n    for(var i = records.length - 1; i >= 0; --i) {\n        var record = records[i];\n\n        html += \"<tr><td colSpan=2><b>\"\n        html += record.split('|')[0];\n        html += \"</b></td></tr>\";\n\n        html += \"<tr><td colSpan=2><pre>\"\n        html += record.split('|')[1];\n        html += \"</pre></td></tr>\";\n    }\n\n    html += \"</tbody></table>\";\n\n    document.getElementById(\"container\").innerHTML = html;\n}\n\nfunction History(props) {\n    const [user, setUser] = useState({});\n    const [conversationHistory, setConversationHistory] = useState([])\n\n    useEffect(() => {\n        setUser(props.user);\n    }, [props.user.isLoggedIn]);\n\n    useEffect(() => {\n        const fetchHistory = async () => {\n            const history = await axios.get(\"/api/userData/history\");\n            setConversationHistory(history.data);\n\n            var records = [];\n\n            history.data.map(s =>\n            {\n                if(s.length > 2 && '*' === s[0] && '*' === s[1])\n                {\n                    s = s.substring(2);\n                    s = s + \"|\";\n\n                    records.push(s);\n                }\n                else if(records.length > 0)\n                {\n                    s = s + \"\\n\";\n                    records[records.length - 1] += s;\n                }\n            })\n\n            genHistoryTable(records);\n        }\n        fetchHistory()\n    }, [conversationHistory.length])\n\n    return (\n        <div id=\"container\">\n        </div>\n    );\n}\n\nexport default History;\n"]},"metadata":{},"sourceType":"module"}